<% layout('layouts/boilerplate') %> 

<div class="container">
   <div class="row mb-3">
      <div class="col-6 offset-3">
         <div class="card shadow mt-3" id="editCard">
            <div class="card-body text-dark p-5">
               <h1 class="text-center text-primary mb-4">Edit campground</h1>
               <form action="/campground/<%= foundCamp.id %>?_method=PATCH" method="POST" class="needs-validation" enctype="multipart/form-data" novalidate>
                  <div class="mb-3">
                        <label class="form-label" for="title">Enter Camp name</label>
                        <input class="form-control" type="text" name="campground[title]" id="title" value="<%= foundCamp.title %>" required>
                        <div class="invalid-feedback">Please enter a Camp Name.</div>
                  </div>
                  <div class="mb-3">
                        <label class="form-label" for="location">Enter Camp Location</label>
                        <input class="form-control" type="text" name="campground[location]" id="location" value="<%= foundCamp.location %>" required>
                        <div class="invalid-feedback">Please enter a Camp Location.</div>    
                  </div>
                  <div class="mb-3">
                        <label class="form-label" for="deccription">Enter Description</label>
                        <textarea class="form-control" type="text" name="campground[description]" id="description" required><%= foundCamp.description%></textarea>
                        <div class="invalid-feedback">Please enter a Camp Description.</div>   
                  </div>
                  <div class="mb-3">
                  <label for="formFileMultiple" class="form-label">Upload More Images</label>
                  <input class="form-control" type="file" name="image" id="formFileMultiple" multiple>
                  </div>
                  <div class="mb-3">
                        <div class="row">
                           <label class="form-label" for="">Delete Image</label>
                           <% foundCamp.images.forEach((img, i)=> { %>
                              <div class="col-5">
                                    <input class="form-check-input" type="checkbox" name="deleteImage[]" id="image-<%= i %>" value="<%= img.filename %>">
                                    <!-- Here we are setting checkbox to have different value(filename of the selected image), and name to be deleteImage[] that means an array. 
                                       The value will be added to the the deleteImage array. We have access to deleteImage in the campground routes-->
                                    <label for="image-<%= i %>"><img src="<%= img.thumbnail %>" class="img-thumbnail" id="image-<%= i %> " alt=""></label>
                              </div>
                           <% }) %> 
                        </div>
                  </div>
                  <div class="row">
                     <div class="col-md-4">
                        <div class="mb-3">
                           <label class="form-label" for="price">Enter Price</label>
                           <div class="input-group mb-3">
                           <span class="input-group-text">Rs.</span>
                           <input type="text" class="form-control" name="campground[price]" id="price" value="<%= foundCamp.price %>" aria-label="price" required>
                           <div class="invalid-feedback">Please enter a Price.</div>
                           </div>   
                        </div>
                     </div>
                  </div>
                  <div class="d-flex justify-content-between m-3">
                     <button class="btn btn-outline-success ">Update</button>
                     <a class="btn btn-outline-secondary" href="/campground/<%= foundCamp.id %>">Back</a>  
                  </div>
               </form>
            </div>
         </div>
      </div>
   </div>
</div>

